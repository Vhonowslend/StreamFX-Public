# AUTOGENERATED COPYRIGHT HEADER START
# Copyright (C) 2020-2023 Michael Fabian 'Xaymar' Dirks <info@xaymar.com>
# AUTOGENERATED COPYRIGHT HEADER END

name: Validate Pull Request

on:
  pull_request:
    branches:
      - '*'

concurrency:
  group: validate-${{ github.ref_name }}
  cancel-in-progress: true

jobs:
  validate:
    name: "Pull Request Validation"
    strategy:
      fail-fast: true
    runs-on: "ubuntu-22.04"
    steps:
    - name: "Clone"
      uses: actions/checkout@v3
      with:
        submodules: false
        fetch-depth: 0

    - name: "Copyright Headers"
      shell: bash
      run: |
        node "tools/copyright.js" .
        git --no-pager diff --patch --minimal HEAD --
        git update-index --refresh
        git diff-index --quiet HEAD --
